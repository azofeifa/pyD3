	
			<!DOCTYPE html>
				<html>
				  <head>
				    <meta charset="utf-8">
				    <title>pyD3</title>
				    <!-- <link rel="stylesheet" href="scatter.css" charset="utf-8"> -->
				  </head>
				  <body>
				    <div id="scatter"></div>      
				        <style>
				            .toolTip {
				              position: absolute;
				              display: none;
				              height: auto;
				              background: none repeat scroll 0 0 #ffffff;
				              background: rgba(0, 0, 0, 0.8);
				              color: #fff;
				              line-height: 1;
				              font-weight: bold;
				              padding: 6px;
				              font-size: 10px;

				              border-radius: 2px;
				              text-align: left;
				              content: "BC";
				            }
				        </style>

				    <script src="https://d3js.org/d3.v4.js"></script>
				    <script>
		var data=[[3.5670916588231769, 0.26847879644378181, 1.7818954083503413, 6.8707855793773422, 'steelblue'], [6.3153275777675137, 1.6333326131767012, 9.5689798505936956, 6.5813677790658094, 'steelblue'], [6.3908285469280628, 8.1644901423285567, 1.4480794201352132, 7.3566156544723871, 'steelblue'], [6.6599513079228476, 0.82263720715400335, 1.8210680717535455, 4.4911483328670485, 'steelblue'], [2.2249083414273585, 7.4720026028559055, 1.5458646210832716, 8.3582281252085586, 'steelblue'], [5.6559726640878241, 9.5024300437539129, 2.3441040581346293, 8.8304437128126914, 'steelblue'], [4.6061875482312011, 4.0781332367161145, 9.4153890021042645, 0.59183029942487586, 'steelblue'], [7.105648077789458, 0.16387831109742401, 4.2496587548526961, 1.3344618698942123, 'steelblue'], [7.8462788916923101, 8.4650251866161987, 5.6112320420999398, 8.6368378199061198, 'steelblue'], [8.5708784263019542, 5.1265000445013129, 6.4623148770814929, 8.1329005297495716, 'steelblue'], [6.1300913467424767, 4.5898156159547767, 3.4682546769955036, 1.256850882320486, 'steelblue'], [9.1150605882455409, 3.8638995915368888, 8.5370965755532779, 8.2071592855914037, 'steelblue'], [9.6968524579531525, 5.209702558071811, 5.5157800063144888, 6.8145736721247507, 'steelblue'], [6.8338230595429685, 3.776230669563394, 1.3125512432151498, 6.7162794681162277, 'steelblue'], [1.830869125788338, 7.7175218615608774, 1.9073448890024813, 6.2740786614069606, 'steelblue'], [0.82373558286832793, 1.556296616963988, 8.7275501320812374, 8.1677703160241482, 'steelblue'], [8.0639264748582722, 8.6552021152637142, 9.6790600717676174, 5.3490197602072236, 'steelblue'], [4.9003674140995912, 2.1021224932657523, 3.7227576062532917, 3.1476346447159043, 'steelblue'], [8.7315828104228821, 2.831885540379171, 0.44727913655895679, 1.1409987973611191, 'steelblue'], [0.88193029068943662, 5.6558820642994991, 9.5141228945630161, 4.1625708074172785, 'steelblue'], [5.5813638038226081, 9.9852297564311083, 4.2851625938149205, 6.4708815694524136, 'steelblue'], [3.8240069918626718, 8.9865720664068398, 8.8087145479683002, 5.6425091550733573, 'steelblue'], [1.4443121298470674, 0.89603501791524542, 9.1318345327805588, 9.1378810826820303, 'steelblue'], [6.6495805858988994, 6.0244433820375507, 6.7358903420561402, 3.883596815140371, 'steelblue'], [3.2738882709174844, 8.3996882484531028, 7.5719104856565291, 3.3409373279491508, 'steelblue'], [4.6731442372836804, 2.2803274828620235, 8.1376022136849695, 9.8567550459567954, 'steelblue'], [1.8235324846659207, 1.9534336305169497, 0.92011076170282924, 1.7622397578544235, 'steelblue'], [0.67174944064587017, 1.1184261567164011, 6.6399625486933846, 4.4556680306789929, 'steelblue'], [4.626049374564837, 2.1458347209945048, 1.5308263107781606, 7.8986057743029914, 'steelblue'], [4.974189634699961, 7.052985663867906, 7.0893431779868852, 3.3379062097342427, 'steelblue'], [8.3347131688869389, 2.6850392283217261, 3.7795381185971055, 2.5376522067502396, 'steelblue'], [2.7964424099830101, 7.7505120510016816, 9.2314061701002501, 4.971134942453884, 'steelblue'], [0.12378626343127586, 0.52399540217375362, 2.2706001259484445, 6.2062426322089026, 'steelblue'], [6.3736320622539626, 6.7712805079995322, 2.6765889202298432, 1.3277351022524397, 'steelblue'], [9.8276152621734951, 9.8278272704218494, 4.4471840428921672, 8.0406923424823127, 'steelblue'], [5.7395204127336443, 7.3026712010075698, 4.7623363338046278, 1.4223085721579998, 'steelblue'], [3.4900287049685366, 3.2496864822445426, 7.7064339078650823, 0.028049136766483684, 'steelblue'], [6.5448990764280239, 0.21118422661428604, 3.5025556243006237, 3.6686434429538806, 'steelblue'], [8.1200433962891001, 1.6904942367036624, 6.5575762050358088, 4.115715952601664, 'steelblue'], [0.15242223896882456, 4.5396409767839785, 9.2433635872718494, 7.5113560860969137, 'steelblue'], [0.82618858314125965, 6.5052591005374545, 8.6402356536033516, 8.69409441026019, 'steelblue'], [4.2072374510242758, 7.1128002601759102, 6.2937508023796216, 1.7000826144778358, 'steelblue'], [9.6332398975573987, 1.7980220541058567, 6.8014340290113395, 3.5416787053659582, 'steelblue'], [9.1720501622938464, 5.7456760085028504, 3.4455887772872318, 6.8561186876097331, 'steelblue'], [3.9281127022400875, 3.0397178559107187, 3.0463030554916273, 3.5347298989014106, 'steelblue'], [9.6344868423596193, 3.4671939908966398, 0.91442609236075945, 4.2476346911780656, 'steelblue'], [5.1920679087494648, 5.5654144603772471, 6.1609531287143025, 8.653391419371312, 'steelblue'], [8.6763338961163736, 5.5641879017600182, 4.7574856524101463, 0.42076641853012187, 'steelblue'], [8.2978810967603618, 9.5845059038155558, 6.8744744213089835, 1.4891147389250492, 'steelblue'], [7.3002410138927543, 7.8355386252095025, 6.2723096178993192, 0.78772283664048981, 'steelblue']];
var xlabels=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49"];
var xlabels_fontsize=10;
var xlabels_rot=0;
var ylabels=["Series A","Series B","Series C","Series D"];
var ylabels_fontsize=2;
var SHOW_LABELS=1;
var pad=10;
var tick_xN=50;
var fontsize_ticks_x=20;
var tick_yN=10;
var fontsize_ticks_y=20;
var yaxis_lbl="";
var fontsize_label_y=30;
var xaxis_lbl="";
var fontsize_label_x=30;
var xaxis_lbl="Something X";
var fontsize_label_x=20;
var yaxis_lbl="Something Y";
var fontsize_label_y=20;
var xlabels=["A","B","C","D","E","F","G","H","I","J","A","B","C","D","E","F","G","H","I","J","A","B","C","D","E","F","G","H","I","J","A","B","C","D","E","F","G","H","I","J","A","B","C","D","E","F","G","H","I","J"];
var xlabels_fontsize=10;
var xlabels_rot=0;
var SHOW_LABELS=1;
var pad=1;
var title="A Random Bar Chart";
var fontsize_title=30



      var type    = 0
      var min   = d3.min(data, function(d){ return  d[type]} );
      var max   = d3.max(data, function(d){ return d[type] } );

      var type_code = d3.map()      

      ylabels.forEach(function(d,i){type_code.set(d,i) })


      var outerWidth        = window.innerWidth,
            outerHeight     = window.innerHeight;

      var   Bottom          = outerHeight*0.2,
            Top             = outerHeight*0.2,
            Left 				 = outerWidth*0.1,
            Right           = outerWidth*0.1;


      var margin                  = { top: Top, right: Right, bottom: Bottom, left: Left };                  
                  width           = outerWidth - margin.left - margin.right,
                  height          = outerHeight - margin.top - margin.bottom;

      var dispatch = d3.dispatch("load", "statechange");
      // A drop-down menu for selecting a state; uses the "menu" namespace.
      dispatch.on("load.menu", function(ylabels) {

        var select = d3.select("#scatter")
                        .append("select")
                        .style("border-width",0)
                        .style("font-family","Times New Roman")
                        .style("font-size",10)
                        .on("change", function(DD) { 
                          dispatch.call("statechange",this,this.value
                          ); });

        select.selectAll("option")
            .data(ylabels)
          .enter().append("option")
            .attr("value", function(d) { return d; })
            .text(function(d) { return d; })
        
        dispatch.on("statechange.menu", function(state) {
            type=type_code.get(state);

            rescale();


            svg.selectAll("rect")
              .transition()

              .attr("y", function(d,i){
                if ((d[type]) > 0){
                  return  y(d[type])
                }
                return y(0)
              })  

              .attr("height", function(d,i){
                if ((d[type]) > 0){
                  return y(0)-y(d[type])
                }
                return y( d[type])-y(0)
              })

             return state
        });
        
      });
      dispatch.call("load", this,ylabels)
      var svg = d3.select("#scatter")
                  .append("svg")
                  .attr("width", outerWidth)
                  .attr("height", outerHeight)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")")


      var x           = d3.scaleLinear()
                          .domain([-1, data.length])
                          .range([ 0, width]) ;

      var y           = d3.scaleLinear()
                          .domain([Math.min(0,min),max])
                          .range([height,0]) ;

      svg.selectAll(".labelx")   
          .style("font-size", fontsize_label_x + "px");

      svg.selectAll(".labely")   
          .style("font-size", fontsize_label_y + "px");


      var wh  = width / (data.length+1)

      rescale()
      var tooltip = d3.select("#scatter").append("div").attr("class", "toolTip");

      var grp = svg.selectAll('g')
              .data(data)
              .enter()
              .append('rect')
              .attr("x", function(d,i){
                return  x(i)-((wh-pad)/2)
              })  
              .attr("width", (wh)-pad)
              .attr("fill", function(d,i){
                return d[ylabels.length];
              })
              .on('mouseover',function(d,i){


                  tooltip
                      .html("Value: " + parseFloat(Math.round(data[i][type] * 100) / 100).toFixed(2) + "<br>" +
                            "Label: " + xlabels[i]   )
                      .style('position','absolute')
                      .style("left", x(i) + Left  + "px")
                      .style("top", y(d[type])+(Bottom*0.9 ) + "px")
                      .style("display", "inline-block")
                                    

                d3.select(this).transition()
                    .duration(100)   
                    .attr('fill', "grey")
              })

              .on('mouseout',function(d,i){
                  tooltip
                      .style("display", "none")

                d3.select(this).transition()
                    .duration(100)   
                    .attr('fill', function(d,i){
                      return d[ylabels.length];
                    })

              })

              .attr("height",0)
              .attr("y",y(0))
                
              .transition()
              .duration(1000)
              .ease(d3.easeBounce)
              .attr("y", function(d,i){
                if ((d[type]) > 0){
                  return  y(d[type])
                }
                return y(0)
              }).attr("height", function(d,i){
                if ((d[type]) > 0){

                  return y(0)-y(d[type])
                }
                return y( d[type])-y(0)
              })
                
      // draw the x axis
      var xAxis = d3.axisBottom(x).tickSize(1).ticks(tick_xN)

      // draw the y axis
      var yAxis = d3.axisLeft(y).tickSize(1).ticks(tick_yN);

      gX  = svg.append("g")
                .classed("x axis", true)
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis)
      gX.style("font-size", fontsize_ticks_x)
          .append("text")
          .classed("labelx", true)
          .attr("x", width)
          .attr("y", height)

      /*
        yaxis and y font tick size
      */ 

      gY  = svg.append("g")
          .classed("yaxis", true)
          .call(yAxis)

      gY.style("font-size", fontsize_ticks_y)
          .append("text")
          .classed("labely", true)
          .attr("x", 0)
          .attr("y", -margin.bottom/1.5 )
          .attr("transform", "rotate(-90)")
      svg.append("text").attr("class", "y label") 
          .attr("transform", "translate("+-margin.left/2 +","+ height/2 + ")rotate(-90)")
          .attr("text-anchor", "middle") 
          .style("font-size", fontsize_label_y)
          .text(yaxis_lbl)

      svg.append("text").attr("class", "y label") 
          .attr("transform", "translate("+width/2 +","+ (height+(Bottom/2)) + ")rotate(0)")
          .attr("text-anchor", "middle") 
          .style("font-size", fontsize_label_x)
          .text(xaxis_lbl)
      gX.selectAll("text").text("")
      if (SHOW_LABELS){
          gX.selectAll("text").text(function(i){
            if (i < 0 || i > xlabels.length){
              return ""
            }
            return xlabels[i];
          })
          .attr("transform", "translate(0,1)rotate(" + xlabels_rot+ ")" )
          .style("text-anchor", "start") 
          .style("font-size",xlabels_fontsize)
      }
		svg.append("text")
					.attr("x", (width / 2))             
					.attr("y", 0 - (margin.top / 2))
					.attr("text-anchor", "middle")  
					.style("font-size", fontsize_title) 
					.text(title);

      function rescale() {

            var min   = d3.min(data, function(d){ return  d[type]} );
            var max   = d3.max(data, function(d){ return d[type] } );

            y.domain([Math.min(0,min),max]).range([height,0])  // change scale to 0, to between 10 and 100
            var yAxis = d3.axisLeft(y).tickSize(1).ticks(tick_yN);
            svg.select("g.yaxis").call(yAxis)

        }


		    </script>
		  </body>
		</html>

		